import { Component, OnInit } from '@angular/core';
import { %Models_NAME%Service } from 'src/app/services/actor/%models_NAME%.service';
import { %Models_NAME%ListDataSrouce } from './%models_NAME%-list.datasource';

@Component({
  selector: 'app-%models_NAME%-list',
  templateUrl: './%models_NAME%-list.component.html',
  styleUrls: ['./%models_NAME%-list.component.scss']
})
export class %Models_NAME%ListComponent implements OnInit {

  public columnsName = ['id', 'creationDate', 'actions'];
  public dataSource: %Models_NAME%ListDataSrouce;

  constructor(
    private readonly %models_NAME%Service: %Models_NAME%Service,
  ) {
    this.dataSource = new %Models_NAME%ListDataSrouce(this.%models_NAME%Service);
  }

  ngOnInit(): void {
    this.refresh();
  }

  /**
   * Refresh the data
   */
  public refresh(): void {
    this.dataSource.loadData();
  }

  /**
   * delete a %Model_NAME% model based on its ID
   */
  public delete(id: string) {
    this.%models_NAME%Service.delete(id).subscribe(
      res => {
        if (res && res === true) {
          console.log('element deleted');
        } else {
          console.log('element not deleted');
        }
        this.refresh();
      },
      err => {
        console.error(`error while deleting ${id}`);
        console.error(err);
      }
    );
  }

}
